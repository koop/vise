/*! Vise - v0.1.0 - 2012-05-03
* https://github.com/koop/vise
* Copyright (c) 2012 Daryl Koopersmith; Licensed GPL */
(function(a){var b=a(document),c=function(a,b){return a<b?-1:a>b?1:0},d;d=function(b,c){this.sizes=a.extend(!0,{},this.sizes),this.options=a.extend(!0,{},this.options,c),this.element=b,this.clamp=a("<div/>").appendTo(this.element),this.loaded=a.proxy(this.loaded,this),this.resizer=a.proxy(this.resizer,this),b.addClass("vise"),this.on("resize",this.resizer),this.trigger("init")},a.fn.vise=function(a){var b=this.first(),c;if(!b.length)return;return(c=b.data("vise"))?c:(c=new d(b,a),b.data("vise",c),c)},a.fn.vise.fn=d.prototype,d.prototype.trigger=function(a,b){b=b||[],b.unshift(this),this.element.trigger("vise."+a,b)},a.each(["on","off"],function(b,c){d.prototype[c]=function(b){var d=a.makeArray(arguments);d[0]="vise."+b,this.element[c].apply(this.element,d)}}),d.prototype.options={scrollbars:!1,mask:!1},d.prototype.sizes={iPhone:[320,480],iPad:[1024,768],kindle:[1024,600]},d.prototype.load=function(b){return this.url=b||this.url,this.iframe&&this.iframe.remove(),this.element.addClass("loading"),this.iframe=a("<iframe />",{src:this.url}).one("load",this.loaded).appendTo(this.clamp),this.trigger("load"),this},d.prototype.loaded=function(a){this.element.removeClass("loading"),this.trigger("loaded")},d.prototype.resize=function(a,b){var d,e;return typeof a=="string"&&(a=this.sizes[a]||!1),a=a||["100%","100%"],b&&(a=a.sort(c),"landscape"===b&&(a=a.reverse())),this.width=a[0],this.height=a[1],this.options.scrollbars&&typeof d=="number"&&(this.width+=15),this.trigger("resize"),this},d.prototype.resizer=function(a,b){b.clamp.css({width:b.width,height:b.height})},b.ready(function(){b.trigger("vise.ready")})})(jQuery),function(a){a.extend(a.fn.vise.fn,{frame:function(){this._frame||(this._frame=a('<div class="vise-frame" />').appendTo(this.clamp),this._frame.update=function(){}),this._frame.show(),this.on("resize",this._frame.update),this.trigger("resize")},unframe:function(){if(!this._frame)return;this._frame.hide(),this.off("resize",this._frame.update)}})}(jQuery),jQuery(document).on("vise.init",function(a,b){b.loader=jQuery('<div class="vise-loader" />').appendTo(b.clamp)}),function(a){a.extend(a.fn.vise.fn,{mask:function(){this._mask||(this._mask=a('<div class="vise-mask" />').appendTo(this.clamp),this._mask.resizers={original:this.resizer},this._mask.resizers.mask=function(a,b){b._mask.css("top",b.height),b.clamp.width(b.width)}),this.off("resize",this.resizer),this.resizer=this._mask.resizers.mask,this.on("resize",this.resizer),this._mask.show(),this.clamp.height("100%"),this.trigger("resize")},unmask:function(){if(!this._mask)return;this.off("resize",this.resizer),this.resizer=this._mask.resizers.original,this.on("resize",this.resizer),this._mask.hide(),this.trigger("resize")}})}(jQuery),function(a){a.extend(a.fn.vise.fn,{_center:function(a,b){var c=b.element.height()-b.height;c=c>0?c:0,b.clamp.css("marginTop",c/2)},center:function(){this.on("resize",this._center),this.trigger("resize")},uncenter:function(){this.clamp.css("marginTop",0),this.off("resize",this._center)}})}(jQuery);